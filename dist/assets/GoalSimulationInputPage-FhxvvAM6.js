import{b as i,a as M,_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-DmFSe4mj.js";import{d as S,p as _,j as E,g,o as f,s as G,b as a,w as l,e as s,t as d,u as w,a as j,F as P,h as T,c as V,n as U,l as A}from"./index-DnLb7Hb6.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-_X2508c5.js";import{C as p}from"./Card-DVQluJUZ.js";import{g as D,a as C}from"./goalCategory.constants-Dz8MtMeY.js";import{m as v}from"./user.mock-BIFHvtDl.js";import{f as F}from"./index-DOkgZAuV.js";import{u as L}from"./goal.store-DWKzLc8g.js";import{b as O}from"./goal.mock-INTdnmCw.js";import{_ as R}from"./Tag.vue_vue_type_script_setup_true_lang-CHnaDNV_.js";const q=async({url:b,method:u,body:r,headers:m={}})=>{try{const o=await fetch(b,{method:u,headers:{"Content-Type":"application/json",...m},body:r?JSON.stringify(r):void 0}),c=await o.json();if(!o.ok)throw new Error(c.message||"API 요청 중 오류가 발생했습니다.");return c}catch(o){throw console.error("[fetcher error]",o),o}},z={class:"flex flex-col items-center justify-center max-w-md mx-auto"},J=["src"],H={class:"grid grid-cols-3 gap-2"},K=S({__name:"GoalSimulationInputForm",setup(b){const u=_(null),r=_(""),m=_(""),o=_(""),c=A(),k=L(),I=v,x=E(()=>{const n=F[v.nowME||""];return n||console.warn(`${v.nowME}에 대한 이미지가 없습니다.`),n}),B=n=>{u.value=n},h=async()=>{if(u.value===null||!r.value||!m.value||!o.value){alert("모든 항목을 입력해주세요.");return}const n=C.indexOf(u.value);if(n===-1){alert("선택한 카테고리가 잘못되었습니다.");return}const e={goalName:r.value,categoryId:n,targetAmount:parseInt(m.value),goalDurationMonths:parseInt(o.value)};let t;try{t=await q({url:"/api/goals/simulation",method:"POST",body:e})}catch{console.warn("⚠️ 서버 연결 실패, mock 데이터 사용"),t=O}k.setResult(t),c.push("/goal/simulation/result")};return(n,e)=>(f(),g("div",z,[x.value?(f(),g("img",{key:0,src:x.value,alt:"성향 이미지",class:"w-1/3"},null,8,J)):G("",!0),a(i,{type:"B_20_160",class:"mb-4"},{default:l(()=>[s(d(w(I).nowME)+" 맞춤 목표 설정",1)]),_:1}),a(p,{class:"w-full mb-4 bg-white border border-gray-150"},{default:l(()=>[a(i,{type:"B_16_120",class:"mb-4 w-full"},{default:l(()=>e[3]||(e[3]=[s("🎯 목표 카테고리를 선택해주세요")])),_:1,__:[3]}),j("div",H,[(f(!0),g(P,null,T(w(C),t=>(f(),V(R,{key:t,class:U([u.value===t?"bg-sub-yellow-p text-white border-none":"bg-white text-gray-800"]),onClick:$=>B(t)},{default:l(()=>[s(d(w(D)[t])+" "+d(t),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1}),a(p,{class:"w-full mb-4 bg-white border border-gray-150"},{default:l(()=>[a(i,{type:"B_16_120",class:"mb-4 w-full"},{default:l(()=>e[4]||(e[4]=[s("🏁 목표명을 입력해주세요")])),_:1,__:[4]}),a(y,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),label:"목표명",class:"w-full mt-2"},null,8,["modelValue"])]),_:1}),a(p,{class:"w-full mb-4 bg-white border border-gray-150"},{default:l(()=>[a(i,{type:"B_16_120",class:"mb-4 w-full"},{default:l(()=>e[5]||(e[5]=[s("💰 목표 금액을 입력해주세요")])),_:1,__:[5]}),a(y,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t),label:"금액",type:"number",class:"w-full mt-2"},null,8,["modelValue"]),a(i,{type:"M_12_120",class:"w-full text-sub-orange-p mt-1 p-2 bg-sub-orange-bg border border-sub-orange-p"},{default:l(()=>[s(" 목표 금액 : "+d(parseInt(m.value||"0").toLocaleString())+"원 ",1)]),_:1})]),_:1}),a(p,{class:"w-full mb-4 bg-white border border-gray-150"},{default:l(()=>[a(i,{type:"B_16_120",class:"mb-2"},{default:l(()=>e[6]||(e[6]=[s("📆 목표 기간 (개월 수)")])),_:1,__:[6]}),a(y,{modelValue:o.value,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value=t),label:"기간",type:"number",class:"w-full mt-2"},null,8,["modelValue"]),a(i,{type:"M_12_120",class:"w-full text-sub-orange-p mt-1 p-2 bg-sub-orange-bg border border-sub-orange-p"},{default:l(()=>[s(" 목표 개월 : "+d(parseInt(o.value||"0").toLocaleString())+"월 ",1)]),_:1})]),_:1}),a(M,{class:"w-full mb-4",onClick:h},{default:l(()=>e[7]||(e[7]=[s("제출하기")])),_:1,__:[7]})]))}}),se=S({__name:"GoalSimulationInputPage",setup(b){return(u,r)=>(f(),V(N,null,{default:l(()=>[a(K)]),_:1}))}});export{se as default};
